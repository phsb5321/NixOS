# Example sops configuration file
# Copy this to .sops.yaml and update with your actual keys
# DO NOT COMMIT .sops.yaml with real keys to version control

keys:
  # Admin user key (for editing secrets locally)
  # Generate with: age-keygen
  - &admin_key age1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

  # Host keys (from ssh-to-age)
  # Generate with: sudo ssh-to-age -i /etc/ssh/ssh_host_ed25519_key
  - &host_default age1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
  - &host_laptop age1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

creation_rules:
  # Default (desktop) host secrets
  - path_regex: secrets/default\.yaml$
    key_groups:
      - age:
          - *admin_key
          - *host_default

  # Laptop host secrets
  - path_regex: secrets/laptop\.yaml$
    key_groups:
      - age:
          - *admin_key
          - *host_laptop

  # Shared secrets accessible by all hosts
  - path_regex: secrets/shared\.yaml$
    key_groups:
      - age:
          - *admin_key
          - *host_default
          - *host_laptop

  # Example encrypted files
  - path_regex: secrets/.*\.yaml\.enc$
    key_groups:
      - age:
          - *admin_key
